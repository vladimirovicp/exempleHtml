<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Smooth 3d perspective slider</title>
<!--    <link rel="stylesheet" href="./css/style.css">-->
    <link rel="stylesheet" href="./css/originstyle.css">
</head>
<body>

<!--    <section class="smooth-3d-slider">-->
<!--        <div class="smooth-3d-slider__content" id="smooth-3d-slider__content">-->
<!--            <div class="smooth-3d-slider__images">-->
<!--                <div class="smooth-3d-slider__images-item" data-id="1">-->
<!--                    <img src="./img/1.jpeg" alt="">-->
<!--                </div>-->
<!--                <div class="smooth-3d-slider__images-item" data-id="2">-->
<!--                    <img src="./img/2.jpeg" alt="">-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </section>-->


<div class="slider" id="slider" style="--img-prev:url(https\:\/\/lh3\.googleusercontent\.com\/r29_BOXT9GjEA49-KbPtzHtTxD16dilHpFROmoJyZdQbvCelXqgG8bcApe8OgIY-avTrFOUWO-lDsmI-muMIgRVc5IFHCIyrOR18DrnwTLh70aSNY6cTY0bNbyt4QCXBlj9R4fmA8PJMRYkTA-nB5zSvlZii9NnP9kG8w__DUrYfo9IbOZAxGY_DsheGuHA0CSWLB-lQwvHo7_sSNabsiZJ2C_878r7uEfaIR6XkjcyrWMKi529UtPl9Ikln3cXphy9HrzElIL6200dGL9GHiMMoASseLp_Z950xjT2smzTrOJSADFCG9EmScicKDbFTYZH6gyc2DEP0mUFRArhTSPa4TIUwLy9KR8bG7kV-ljmSPKv4pbtH4ByXgQ5DEm5ydOkR-DTkYkLBkcFL8cjiBPPuUdK3xkjoOciwjglMF5xAXhpnTj0VUnk3RWc9YDD-AQI2uvDatV_Ae0zzLQUIm2gfV3QiDXdkkzeLWsRmCXrr0bFf42s_1NrWD0GLfrTtHNqzBCfYbAWtjeBxHfMxlESqJLAvGketLMscx5PndptC0MRhGZESjWdRUE3kNxg7PA9EhTZg\=w1600-h766); --from-left:3; --img-next:url(https\:\/\/lh3\.googleusercontent\.com\/r29_BOXT9GjEA49-KbPtzHtTxD16dilHpFROmoJyZdQbvCelXqgG8bcApe8OgIY-avTrFOUWO-lDsmI-muMIgRVc5IFHCIyrOR18DrnwTLh70aSNY6cTY0bNbyt4QCXBlj9R4fmA8PJMRYkTA-nB5zSvlZii9NnP9kG8w__DUrYfo9IbOZAxGY_DsheGuHA0CSWLB-lQwvHo7_sSNabsiZJ2C_878r7uEfaIR6XkjcyrWMKi529UtPl9Ikln3cXphy9HrzElIL6200dGL9GHiMMoASseLp_Z950xjT2smzTrOJSADFCG9EmScicKDbFTYZH6gyc2DEP0mUFRArhTSPa4TIUwLy9KR8bG7kV-ljmSPKv4pbtH4ByXgQ5DEm5ydOkR-DTkYkLBkcFL8cjiBPPuUdK3xkjoOciwjglMF5xAXhpnTj0VUnk3RWc9YDD-AQI2uvDatV_Ae0zzLQUIm2gfV3QiDXdkkzeLWsRmCXrr0bFf42s_1NrWD0GLfrTtHNqzBCfYbAWtjeBxHfMxlESqJLAvGketLMscx5PndptC0MRhGZESjWdRUE3kNxg7PA9EhTZg\=w1600-h766);">
    <div class="slider__content" id="slider-content" style="transform: translateZ(8.519vw) rotateX(9.62081deg) rotateY(0.5965deg);">
        <div class="slider__images">
            <div class="slider__images-item" data-id="1"><img src="https://lh3.googleusercontent.com/aC9nyW5dhaYFmWD8fcf8DApjpH08eHEkbCHqmUPHRQ5T3jK-QyNKZYVMehmrvyPdEA_KxWvgZ3_kyOOYOAv99Ow3UoKSvEloleVKGSfLOwOyDV3Q6Dwi1G-NYoa9-t_ofmmskE6BYnVIOnIz2HWlMcijzIEwvKAL_R4z63DaLgG0z_OcGiSQHunwGAPXrBQUv42ZXuIMODq4zxDHczSxJ72b0-_udtdQK3JuT2X8nXCwFoF7GxmOpzXS0H5f50DuCbXoXcx-O7bgBMCXZdMpTxB27-wdXeLmxpYUySXgjSN2NAKmK16DmGLYvw5tMlrqwb8h4MJEEbXjP1pjPxXsahb7UZseEGyn80uLjATANJvusyJWCtzkkxYXPz-yI1rDvfEJKe2eyA-5AvFlzFBSwBMASn8f7mXinUrXMMREkJQjoi89NfZ91G7253OEVQOqcWxddiYtcHCO5v6Pl3QfV2SUTWXgggscDSY2ezjSPpYERNTXnIM_aCyWmIG7ybrfqOB0eVYBAgynyuPVbjd4KuZWZq2Dfu33HX1RuPKglbOuZGD1QbpJnruvUVkAmjDXI40ENN7X=w1600-h766" style="transform: translateX(1em) translateY(1em);"></div>
            <div class="slider__images-item" data-id="2"><img src="https://lh3.googleusercontent.com/4Bn4zdADhWhegRcmxS1xmHxbxIBzEgB8ADfeaCmiwT9iF7y2mN9Wc5L7gFLxUo2bgl3V-97EFrOyE9OXfkvip3pkpNxYe50GiapeT41p7D7tNJm3oEdV8Y-7toGyvz0UZ8VgDACVTUEdzzVVm2NtQSCroSvmo4gL3u0ty-KAyKnah9vIitfw2Rs1MuNzQq6vmzUcw1_4obGAKmk_Nx0dD33RSy1jbT8D61kxERbOu0pHUciywIO2EeUX8iOcJfHHQwVW3lGYcZKSiimGjBUvzHILrSpVZQ1xUlj0U21EeY4Hil1ZaJQaX47hQezcxZj7H8GyWhNv2TzQ7EU8DS3_MonCLxXlnXfk-80nncPa8DxN_UlIzJeOPDiWPSLXFaDJn_ywCutx-0onw5rcSC815_krGHXKt3L_weD5pq_e_2WI3BRZndcR2jOYLz9BiUp52ouDBIDw2OzrDtUgxne9NaQ2tOJwaIR26N1un92ChTLhXZF2F2NoS3Do96TY6A5dP6RsXQzK6G0Z6oj5XtYx-p--PrdP8wiDPAzOqXQkXbJaX8l2qPi3nTYrD8rB-eKyL2E1q9xQ=w1600-h766" style="transform: translateX(1em) translateY(1em);"></div>
            <div class="slider__images-item slider__images-item--active" data-id="3"><img src="https://lh3.googleusercontent.com/r29_BOXT9GjEA49-KbPtzHtTxD16dilHpFROmoJyZdQbvCelXqgG8bcApe8OgIY-avTrFOUWO-lDsmI-muMIgRVc5IFHCIyrOR18DrnwTLh70aSNY6cTY0bNbyt4QCXBlj9R4fmA8PJMRYkTA-nB5zSvlZii9NnP9kG8w__DUrYfo9IbOZAxGY_DsheGuHA0CSWLB-lQwvHo7_sSNabsiZJ2C_878r7uEfaIR6XkjcyrWMKi529UtPl9Ikln3cXphy9HrzElIL6200dGL9GHiMMoASseLp_Z950xjT2smzTrOJSADFCG9EmScicKDbFTYZH6gyc2DEP0mUFRArhTSPa4TIUwLy9KR8bG7kV-ljmSPKv4pbtH4ByXgQ5DEm5ydOkR-DTkYkLBkcFL8cjiBPPuUdK3xkjoOciwjglMF5xAXhpnTj0VUnk3RWc9YDD-AQI2uvDatV_Ae0zzLQUIm2gfV3QiDXdkkzeLWsRmCXrr0bFf42s_1NrWD0GLfrTtHNqzBCfYbAWtjeBxHfMxlESqJLAvGketLMscx5PndptC0MRhGZESjWdRUE3kNxg7PA9EhTZg=w1600-h766" style="transform: translateX(-0.05965em) translateY(0.962081em);"></div>
            <div class="slider__images-item" data-id="4"><img src="https://lh3.googleusercontent.com/7MsdX710gvwl8YRxuiPIlIbGP8d3ypDASWqIOad9SpHHAPwMATjCoftyvoHjpy9eeD8aJVxVup-Zb02QMeBSFOXyqOlVc8ib3TVIXtktozy6sJK07H8Jo8UlJSpYcfgUq83Z5rJOiGQQAaZPhRYUcCR0aenU8Eh8aTuqvttfZA-PjsU39q5_I1HcpWDF1mXIxJTmlGqsoQNIuL75GDE-I2im2tAjEk6bkJkJEbDntxB5cLJEfV8TuKRsQwenkiN5opF4ttHGXYtJlS7adu-IO4wVIFcEOzdx4c1Eri3O6f9qjsTpXQH3BmpkTaLAtL5xzJit9qa0a4Dp-aZOZp1QzWeB6-dLM5HRxSiPFkku3S1umwm_GBeY3glxd3Ftata1mFIxpis6gR76oTiNO33vjxn1UZXYhCQUDByGyyuE6WOoPtu9iXJxfmUF9UMXiXVl7qyH-U7NJmq18qcU0Q6U7H3VucD_d2Vg8WTZmqVq7aA4jQ7MLuQASgMZIerxgwV_aW98z7xsS8isHgF9rN4Qtez18OjyabQxRXlC6shvRTqTDCpt1MPlfBWwyR2BKO3dHzk7h8T5=w1600-h766" style="transform: translateX(1em) translateY(1em);"></div>
            <div class="slider__images-item" data-id="5"><img src="https://lh3.googleusercontent.com/lqd5x1eNHsfzWpPeHNPe4u-ycQh1LyxWLp_mXi8tLvQGh4aNCbANfSfSWQdqhQy7c2J2V3a4dGIw6tRcMJCpFvsRrLLpXcFgHIjWpCWoxtgWC--0tMjb6W-YYKJX55zIhS1omxmSGPuQx1sZtsAL-XnRiqXbEIjGX1A_vbDObqVEc8TP3nVsraN5xLtektJbccNriwqqZ2CqpiuHagXKCRt3oa7D8N2ZygR-i04o8YP2pHr6I0Z76R6lZj1HDY65Sj-mkPJpN6nWKY-V_6htmMndJRY615MHntdsfZ82k5_IBbJXxdIN5MjJvgk41eyFXxzTKIXSGms-itEbW7FqMlZT8bIAigDoXYub9rh-FjtfdmVRVdwIIngzFzJrJQBroyHPxW9kW2JjH8foZCzX5YMStsHvfm1s4uAhZtbwK4KI_-x9GuXI3-cCUmtuFdQ-E2z_l3Hom57dasvYj6tFcqhRS9X_popdYTxR-4IeSE-NAjp71LDevvejtAqQTvpIRMFhV9um8qOb-xkPRe0xSoR6-chA2cQE--cbFJiLxe6ywBIqW6lI-aSI9Kv924s-OfRUGz0u=w1600-h766" style="transform: translateX(1em) translateY(1em);"></div>
        </div>
        <div class="slider__text">
            <div class="slider__text-item" data-id="1">
                <div class="slider__text-item-head">
                    <h3>Forest</h3>
                </div>
                <div class="slider__text-item-info">
                    <p>“And into the forest I go, to lose my mind and find my soul”</p>
                </div>
            </div>
            <div class="slider__text-item" data-id="2">
                <div class="slider__text-item-head">
                    <h3>Lake</h3>
                </div>
                <div class="slider__text-item-info">
                    <p>“Mist to mist, drops to drops. For water thou art, and unto water shalt thou return”</p>
                </div>
            </div>
            <div class="slider__text-item slider__text-item--active" data-id="3">
                <div class="slider__text-item-head">
                    <h3>Cliffs</h3>
                </div>
                <div class="slider__text-item-info">
                    <p>“Go to the edge of the cliff and jump off. Build your wings on the way down”</p>
                </div>
            </div>
            <div class="slider__text-item" data-id="4">
                <div class="slider__text-item-head">
                    <h3>Mountains</h3>
                </div>
                <div class="slider__text-item-info">
                    <p>“What are men to rocks and mountains?”</p>
                </div>
            </div>
            <div class="slider__text-item" data-id="5">
                <div class="slider__text-item-head">
                    <h3>Peaks</h3>
                </div>
                <div class="slider__text-item-info">
                    <p>“On all the peaks lies peace”</p>
                </div>
            </div>
        </div>
    </div>
    <div class="slider__nav">
        <div class="slider__nav-arrows">
            <div class="slider__nav-arrow slider__nav-arrow--left" id="left">to left</div>
            <div class="slider__nav-arrow slider__nav-arrow--right" id="right">to right</div>
        </div>
        <div class="slider__nav-dots" id="slider-dots">
            <div class="slider__nav-dot slider__nav-dot--active" data-id="1"></div>
            <div class="slider__nav-dot" data-id="2"></div>
            <div class="slider__nav-dot" data-id="3"></div>
            <div class="slider__nav-dot" data-id="4"></div>
            <div class="slider__nav-dot" data-id="5"></div>
        </div>
    </div>
</div>
<script src="https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-1b93190375e9ccc259df3a57c1abc0e64599724ae30d7ea4c6877eb615f89387.js"></script>


<script id="rendered-js">
    /*
      More about this function -
      https://codepen.io/rachsmith/post/animation-tip-lerp
    */
    function lerp({ x, y }, { x: targetX, y: targetY }) {
        const fraction = 0.1;

        x += (targetX - x) * fraction;
        y += (targetY - y) * fraction;

        return { x, y };
    }

    class Slider {
        constructor(el) {
            const imgClass = this.IMG_CLASS = 'slider__images-item';
            const textClass = this.TEXT_CLASS = 'slider__text-item';
            const activeImgClass = this.ACTIVE_IMG_CLASS = `${imgClass}--active`;
            const activeTextClass = this.ACTIVE_TEXT_CLASS = `${textClass}--active`;

            this.el = el;
            this.contentEl = document.getElementById('slider-content');
            this.onMouseMove = this.onMouseMove.bind(this);

            // taking advantage of the live nature of 'getElement...' methods
            this.activeImg = el.getElementsByClassName(activeImgClass);
            this.activeText = el.getElementsByClassName(activeTextClass);
            this.images = el.getElementsByTagName('img');

            document.getElementById('slider-dots').
            addEventListener('click', this.onDotClick.bind(this));

            document.getElementById('left').
            addEventListener('click', this.prev.bind(this));

            document.getElementById('right').
            addEventListener('click', this.next.bind(this));

            window.addEventListener('resize', this.onResize.bind(this));

            this.onResize();

            this.length = this.images.length;
            this.lastX = this.lastY = this.targetX = this.targetY = 0;
        }
        onResize() {
            const htmlStyles = getComputedStyle(document.documentElement);
            const mobileBreakpoint = htmlStyles.getPropertyValue('--mobile-bkp');

            const isMobile = this.isMobile = matchMedia(
                `only screen and (max-width: ${mobileBreakpoint})`).
                matches;

            this.halfWidth = innerWidth / 2;
            this.halfHeight = innerHeight / 2;
            this.zDistance = htmlStyles.getPropertyValue('--z-distance');

            if (!isMobile && !this.mouseWatched) {
                this.mouseWatched = true;
                this.el.addEventListener('mousemove', this.onMouseMove);
                this.el.style.setProperty(
                    '--img-prev',
                    `url(${this.images[+this.activeImg[0].dataset.id - 1].src})`);

                this.contentEl.style.setProperty('transform', `translateZ(${this.zDistance})`);
            } else if (isMobile && this.mouseWatched) {
                this.mouseWatched = false;
                this.el.removeEventListener('mousemove', this.onMouseMove);
                this.contentEl.style.setProperty('transform', 'none');
            }
        }
        getMouseCoefficients({ pageX, pageY } = {}) {
            const halfWidth = this.halfWidth;
            const halfHeight = this.halfHeight;
            const xCoeff = ((pageX || this.targetX) - halfWidth) / halfWidth;
            const yCoeff = (halfHeight - (pageY || this.targetY)) / halfHeight;

            return { xCoeff, yCoeff };
        }
        onMouseMove({ pageX, pageY }) {
            this.targetX = pageX;
            this.targetY = pageY;

            if (!this.animationRunning) {
                this.animationRunning = true;
                this.runAnimation();
            }
        }
        runAnimation() {
            if (this.animationStopped) {
                this.animationRunning = false;
                return;
            }

            const maxX = 10;
            const maxY = 10;

            const newPos = lerp({
                    x: this.lastX,
                    y: this.lastY },
                {
                    x: this.targetX,
                    y: this.targetY });


            const { xCoeff, yCoeff } = this.getMouseCoefficients({
                pageX: newPos.x,
                pageY: newPos.y });


            this.lastX = newPos.x;
            this.lastY = newPos.y;

            this.positionImage({ xCoeff, yCoeff });

            this.contentEl.style.setProperty('transform', `
      translateZ(${this.zDistance})
      rotateX(${maxY * yCoeff}deg)
      rotateY(${maxX * xCoeff}deg)
    `);

            if (this.reachedFinalPoint) {
                this.animationRunning = false;
            } else {
                requestAnimationFrame(this.runAnimation.bind(this));
            }
        }
        get reachedFinalPoint() {
            const lastX = ~~this.lastX;
            const lastY = ~~this.lastY;
            const targetX = this.targetX;
            const targetY = this.targetY;

            return (lastX == targetX || lastX - 1 == targetX || lastX + 1 == targetX) && (
                lastY == targetY || lastY - 1 == targetY || lastY + 1 == targetY);
        }
        positionImage({ xCoeff, yCoeff }) {
            const maxImgOffset = 1;
            const currentImage = this.activeImg[0].children[0];

            currentImage.style.setProperty('transform', `
      translateX(${maxImgOffset * -xCoeff}em)
      translateY(${maxImgOffset * yCoeff}em)
    `);
        }
        onDotClick({ target }) {
            if (this.inTransit) return;

            const dot = target.closest('.slider__nav-dot');

            if (!dot) return;

            const nextId = dot.dataset.id;
            const currentId = this.activeImg[0].dataset.id;

            if (currentId == nextId) return;

            this.startTransition(nextId);
        }
        transitionItem(nextId) {
            function onImageTransitionEnd(e) {
                e.stopPropagation();

                nextImg.classList.remove(transitClass);

                self.inTransit = false;

                this.className = imgClass;
                this.removeEventListener('transitionend', onImageTransitionEnd);
            }

            const self = this;
            const el = this.el;
            const currentImg = this.activeImg[0];
            const currentId = currentImg.dataset.id;
            const imgClass = this.IMG_CLASS;
            const textClass = this.TEXT_CLASS;
            const activeImgClass = this.ACTIVE_IMG_CLASS;
            const activeTextClass = this.ACTIVE_TEXT_CLASS;
            const subActiveClass = `${imgClass}--subactive`;
            const transitClass = `${imgClass}--transit`;
            const nextImg = el.querySelector(`.${imgClass}[data-id='${nextId}']`);
            const nextText = el.querySelector(`.${textClass}[data-id='${nextId}']`);

            let outClass = '';
            let inClass = '';

            this.animationStopped = true;

            nextText.classList.add(activeTextClass);

            el.style.setProperty('--from-left', nextId);

            currentImg.classList.remove(activeImgClass);
            currentImg.classList.add(subActiveClass);

            if (currentId < nextId) {
                outClass = `${imgClass}--next`;
                inClass = `${imgClass}--prev`;
            } else {
                outClass = `${imgClass}--prev`;
                inClass = `${imgClass}--next`;
            }

            nextImg.classList.add(outClass);

            requestAnimationFrame(() => {
                nextImg.classList.add(transitClass, activeImgClass);
                nextImg.classList.remove(outClass);

                this.animationStopped = false;
                this.positionImage(this.getMouseCoefficients());

                currentImg.classList.add(transitClass, inClass);
                currentImg.addEventListener('transitionend', onImageTransitionEnd);
            });

            if (!this.isMobile)
                this.switchBackgroundImage(nextId);
        }
        startTransition(nextId) {
            function onTextTransitionEnd(e) {
                if (!e.pseudoElement) {
                    e.stopPropagation();

                    requestAnimationFrame(() => {
                        self.transitionItem(nextId);
                    });

                    this.removeEventListener('transitionend', onTextTransitionEnd);
                }
            }

            if (this.inTransit) return;

            const activeText = this.activeText[0];
            const backwardsClass = `${this.TEXT_CLASS}--backwards`;
            const self = this;

            this.inTransit = true;

            activeText.classList.add(backwardsClass);
            activeText.classList.remove(this.ACTIVE_TEXT_CLASS);
            activeText.addEventListener('transitionend', onTextTransitionEnd);

            requestAnimationFrame(() => {
                activeText.classList.remove(backwardsClass);
            });
        }
        next() {
            if (this.inTransit) return;

            let nextId = +this.activeImg[0].dataset.id + 1;

            if (nextId > this.length)
                nextId = 1;

            this.startTransition(nextId);
        }
        prev() {
            if (this.inTransit) return;

            let nextId = +this.activeImg[0].dataset.id - 1;

            if (nextId < 1)
                nextId = this.length;

            this.startTransition(nextId);
        }
        switchBackgroundImage(nextId) {
            function onBackgroundTransitionEnd(e) {
                if (e.target === this) {
                    this.style.setProperty('--img-prev', imageUrl);
                    this.classList.remove(bgClass);
                    this.removeEventListener('transitionend', onBackgroundTransitionEnd);
                }
            }

            const bgClass = 'slider--bg-next';
            const el = this.el;
            const imageUrl = `url(${this.images[+nextId - 1].src})`;

            el.style.setProperty('--img-next', imageUrl);
            el.addEventListener('transitionend', onBackgroundTransitionEnd);
            el.classList.add(bgClass);
        }}


    const sliderEl = document.getElementById('slider');
    const slider = new Slider(sliderEl);

    // ------------------ Demo stuff ------------------------ //

    let timer = 0;

    function autoSlide() {
        requestAnimationFrame(() => {
            slider.next();
        });

        timer = setTimeout(autoSlide, 5000);
    }

    function stopAutoSlide() {
        clearTimeout(timer);

        this.removeEventListener('touchstart', stopAutoSlide);
        this.removeEventListener('mousemove', stopAutoSlide);
    }

    sliderEl.addEventListener('mousemove', stopAutoSlide);
    sliderEl.addEventListener('touchstart', stopAutoSlide);

    timer = setTimeout(autoSlide, 2000);
    //# sourceURL=pen.js
</script>






    <script src="./js/script.js"></script>


</body>
</html>